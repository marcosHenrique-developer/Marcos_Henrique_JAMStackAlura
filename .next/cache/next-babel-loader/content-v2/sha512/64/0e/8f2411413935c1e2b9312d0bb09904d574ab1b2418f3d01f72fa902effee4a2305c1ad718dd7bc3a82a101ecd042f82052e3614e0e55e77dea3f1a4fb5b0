{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Downloads/Projetos/Projeto Jam-Stack/Project-portifolio/src/components/Modal/FormMensage/index.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable operator-linebreak */\n\n/* eslint-disable indent */\n\n/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport styled, { css } from 'styled-components';\nimport { breakpointsMedia } from '../../../theme/utils/breakpointMedia';\nimport Text from '../../../foundation';\nimport Button from '../../Button';\nimport TextField from '../../Input';\nimport Result from './Result';\nimport Box from '../../../foundation/Box';\nconst FormMessageWrapper = styled.section`\n  /* width: 100%; */\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  padding: 0.2rem 0.5rem;\n`;\nFormMessageWrapper.Title = styled.div`\n  width: 92%;\n  height: 25%;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n`;\nFormMessageWrapper.Content = styled.div`\n  /* width: 90%; */\n  & form {\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n  }\n  & form button {\n    align-self: flex-end;\n    ${breakpointsMedia({\n  xs: css`\n        margin-right: auto;\n      `,\n  md: css`\n        margin-right: auto;\n      `\n})}\n  }\n`;\nconst formStates = {\n  DEFAULT: 'DEFAULT',\n  LOADING: 'LOADING',\n  DONE: 'DONE',\n  ERROR: 'ERROR'\n};\n\nconst FormContent = () => {\n  const [isFormSubmited, setIsFormSubmited] = React.useState(false);\n  const [submissionStatus, setSubmissionStatus] = React.useState(formStates.DEFAULT);\n  const [userInfo, setUserInfo] = React.useState({\n    email: '',\n    nome: ''\n  }); // eslint-disable-next-line operator-linebreak\n\n  const isFormInvalid = userInfo.email.length === 0 || userInfo.nome.lenght === 0;\n\n  async function resetValues() {\n    await new Promise(resolve => setTimeout(resolve, 5000));\n    setIsFormSubmited(false);\n    setSubmissionStatus(formStates.DEFAULT);\n    setUserInfo({\n      email: '',\n      nome: ''\n    });\n  }\n\n  function handleChange(ev) {\n    const fieldName = ev.target.getAttribute('name');\n    setUserInfo(_objectSpread(_objectSpread({}, userInfo), {}, {\n      [fieldName]: ev.target.value\n    }));\n  }\n\n  return (// eslint-disable-next-line react/jsx-filename-extension\n    __jsx(FormMessageWrapper.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }\n    }, __jsx(FormMessageWrapper.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, __jsx(Text, {\n      tag: \"h1\",\n      mobile: \"subTitleXS\",\n      desktop: \"subTitleMD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, !isFormSubmited && 'Please type a valid message', isFormSubmited && submissionStatus === formStates.LOADING && 'Loading ...', isFormSubmited && submissionStatus === formStates.ERROR && 'Try again :(', isFormSubmited && submissionStatus === formStates.DONE && 'Congratulations :)')), __jsx(\"form\", {\n      onSubmit: ev => {\n        ev.preventDefault();\n        setIsFormSubmited(true);\n        setSubmissionStatus(formStates.LOADING);\n        const userDTO = {\n          username: userInfo.email,\n          name: userInfo.nome\n        };\n        setTimeout(() => {\n          fetch('https://instalura-api.vercel.app/api/users', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(userDTO)\n          }).then(respostaDoServidor => {\n            if (respostaDoServidor.ok) {\n              return respostaDoServidor.json();\n            }\n\n            throw new Error('Não foi possível cadastrar o usuário agora :(');\n          }).then(respostaConvertidaEmObjeto => {\n            setSubmissionStatus(formStates.DONE);\n            resetValues();\n            console.log(respostaConvertidaEmObjeto);\n          }).catch(error => {\n            setSubmissionStatus(formStates.ERROR);\n            resetValues();\n            console.error(error);\n          });\n        }, 500);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, __jsx(Text, {\n      variant: \"title\",\n      tag: \"h1\",\n      color: \"tertiary.main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }, \"Entre em contato conosco\"), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }, __jsx(TextField, {\n      placeholder: \"Nome\",\n      name: \"nome\",\n      value: userInfo.nome,\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, __jsx(TextField, {\n      placeholder: \"Email\",\n      name: \"email\",\n      value: userInfo.email,\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      style: {\n        display: 'center',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }, __jsx(Button, {\n      variant: \"primary.main\",\n      type: \"submit\",\n      disabled: isFormInvalid,\n      fullWidth: true,\n      margin: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }, \"Enviar\")), __jsx(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }\n    }, __jsx(Box, {\n      width: \"150px\",\n      height: \"150px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }, isFormSubmited && submissionStatus === formStates.LOADING && __jsx(Result, {\n      animation: formStates.LOADING,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    }), isFormSubmited && submissionStatus === formStates.DONE && __jsx(Result, {\n      animation: formStates.DONE,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    }), isFormSubmited && submissionStatus === formStates.ERROR && __jsx(Result, {\n      animation: formStates.ERROR,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 15\n      }\n    })))))\n  );\n}; // eslint-disable-next-line react/prop-types\n\n\nconst FormCadastro = ({\n  props\n}) => __jsx(FormMessageWrapper, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 3\n  }\n}, __jsx(Box, _extends({\n  boxShadow: \"3px 2px 5px rgba(7, 12, 14, 0.3)\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  justifyContent: \"center\",\n  flex: 1,\n  padding: {\n    xs: '16px',\n    md: '30px'\n  },\n  borderRadius: \"1rem\",\n  margin: \"10rem 0 0\",\n  backgroundColor: \"white\" // eslint-disable-next-line react/jsx-props-no-spreading\n\n}, props, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }\n}), props && __jsx(props.CloseButton, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 17\n  }\n}), __jsx(FormContent, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 7\n  }\n})));\n\nexport default FormCadastro;","map":{"version":3,"sources":["/Users/apple/Downloads/Projetos/Projeto Jam-Stack/Project-portifolio/src/components/Modal/FormMensage/index.js"],"names":["React","styled","css","breakpointsMedia","Text","Button","TextField","Result","Box","FormMessageWrapper","section","Title","div","Content","xs","md","formStates","DEFAULT","LOADING","DONE","ERROR","FormContent","isFormSubmited","setIsFormSubmited","useState","submissionStatus","setSubmissionStatus","userInfo","setUserInfo","email","nome","isFormInvalid","length","lenght","resetValues","Promise","resolve","setTimeout","handleChange","ev","fieldName","target","getAttribute","value","preventDefault","userDTO","username","name","fetch","method","headers","body","JSON","stringify","then","respostaDoServidor","ok","json","Error","respostaConvertidaEmObjeto","console","log","catch","error","display","justifyContent","alignItems","FormCadastro","props"],"mappings":"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","sourcesContent":["/* eslint-disable operator-linebreak */\n/* eslint-disable indent */\n/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { breakpointsMedia } from '../../../theme/utils/breakpointMedia';\nimport Text from '../../../foundation';\nimport Button from '../../Button';\nimport TextField from '../../Input';\nimport Result from './Result';\nimport Box from '../../../foundation/Box';\n\nconst FormMessageWrapper = styled.section`\n  /* width: 100%; */\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  padding: 0.2rem 0.5rem;\n`;\nFormMessageWrapper.Title = styled.div`\n  width: 92%;\n  height: 25%;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n`;\nFormMessageWrapper.Content = styled.div`\n  /* width: 90%; */\n  & form {\n    display: flex;\n    position: relative;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n  }\n  & form button {\n    align-self: flex-end;\n    ${breakpointsMedia({\n      xs: css`\n        margin-right: auto;\n      `,\n      md: css`\n        margin-right: auto;\n      `,\n    })}\n  }\n`;\n\nconst formStates = {\n  DEFAULT: 'DEFAULT',\n  LOADING: 'LOADING',\n  DONE: 'DONE',\n  ERROR: 'ERROR',\n};\n\nconst FormContent = () => {\n  const [isFormSubmited, setIsFormSubmited] = React.useState(false);\n  const [submissionStatus, setSubmissionStatus] = React.useState(\n    formStates.DEFAULT,\n  );\n  const [userInfo, setUserInfo] = React.useState({\n    email: '',\n    nome: '',\n  });\n\n  // eslint-disable-next-line operator-linebreak\n  const isFormInvalid =\n    userInfo.email.length === 0 || userInfo.nome.lenght === 0;\n\n  async function resetValues() {\n    await new Promise((resolve) => setTimeout(resolve, 5000));\n    setIsFormSubmited(false);\n    setSubmissionStatus(formStates.DEFAULT);\n    setUserInfo({ email: '', nome: '' });\n  }\n\n  function handleChange(ev) {\n    const fieldName = ev.target.getAttribute('name');\n    setUserInfo({\n      ...userInfo,\n      [fieldName]: ev.target.value,\n    });\n  }\n  return (\n    // eslint-disable-next-line react/jsx-filename-extension\n    <FormMessageWrapper.Content>\n      <FormMessageWrapper.Title>\n        <Text tag=\"h1\" mobile=\"subTitleXS\" desktop=\"subTitleMD\">\n          {!isFormSubmited && 'Please type a valid message'}\n          {isFormSubmited &&\n            submissionStatus === formStates.LOADING &&\n            'Loading ...'}\n          {isFormSubmited &&\n            submissionStatus === formStates.ERROR &&\n            'Try again :('}\n          {isFormSubmited &&\n            submissionStatus === formStates.DONE &&\n            'Congratulations :)'}\n        </Text>\n      </FormMessageWrapper.Title>\n      <form\n        onSubmit={(ev) => {\n          ev.preventDefault();\n          setIsFormSubmited(true);\n          setSubmissionStatus(formStates.LOADING);\n          const userDTO = { username: userInfo.email, name: userInfo.nome };\n          setTimeout(() => {\n            fetch('https://instalura-api.vercel.app/api/users', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              body: JSON.stringify(userDTO),\n            })\n              .then((respostaDoServidor) => {\n                if (respostaDoServidor.ok) {\n                  return respostaDoServidor.json();\n                }\n                throw new Error(\n                  'Não foi possível cadastrar o usuário agora :(',\n                );\n              })\n              .then((respostaConvertidaEmObjeto) => {\n                setSubmissionStatus(formStates.DONE);\n                resetValues();\n                console.log(respostaConvertidaEmObjeto);\n              })\n              .catch((error) => {\n                setSubmissionStatus(formStates.ERROR);\n                resetValues();\n                console.error(error);\n              });\n          }, 500);\n        }}\n      >\n        <Text variant=\"title\" tag=\"h1\" color=\"tertiary.main\">\n          Entre em contato conosco\n        </Text>\n        <div>\n          <TextField\n            placeholder=\"Nome\"\n            name=\"nome\"\n            value={userInfo.nome}\n            onChange={handleChange}\n          />\n        </div>\n        <div>\n          <TextField\n            placeholder=\"Email\"\n            name=\"email\"\n            value={userInfo.email}\n            onChange={handleChange}\n          />\n        </div>\n        <div\n          style={{\n            display: 'center',\n            justifyContent: 'center',\n            alignItems: 'center',\n          }}\n        >\n          <Button\n            variant=\"primary.main\"\n            type=\"submit\"\n            disabled={isFormInvalid}\n            fullWidth\n            margin=\"0\"\n          >\n            Enviar\n          </Button>\n        </div>\n\n        <Box display=\"flex\" justifyContent=\"center\">\n          <Box width=\"150px\" height=\"150px\">\n            {isFormSubmited && submissionStatus === formStates.LOADING && (\n              <Result animation={formStates.LOADING} />\n            )}\n            {isFormSubmited && submissionStatus === formStates.DONE && (\n              <Result animation={formStates.DONE} />\n            )}\n            {isFormSubmited && submissionStatus === formStates.ERROR && (\n              <Result animation={formStates.ERROR} />\n            )}\n          </Box>\n        </Box>\n      </form>\n    </FormMessageWrapper.Content>\n  );\n};\n\n// eslint-disable-next-line react/prop-types\nconst FormCadastro = ({ props }) => (\n  <FormMessageWrapper>\n    <Box\n      boxShadow=\"3px 2px 5px rgba(7, 12, 14, 0.3)\"\n      display=\"flex\"\n      flexDirection=\"column\"\n      justifyContent=\"center\"\n      flex={1}\n      padding={{\n        xs: '16px',\n        md: '30px',\n      }}\n      borderRadius=\"1rem\"\n      margin=\"10rem 0 0\"\n      backgroundColor=\"white\"\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...props}\n    >\n      {props && <props.CloseButton />}\n      <FormContent />\n    </Box>\n  </FormMessageWrapper>\n);\n\nexport default FormCadastro;\n"]},"metadata":{},"sourceType":"module"}